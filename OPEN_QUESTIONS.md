# DarkFi Open Questions & Notes

## Status (Updated 2026-02-28)
- **darkirc**: Working (commit a05956d)
- **darkfid**: WAITING - testnet offline, pending reset
- **Mining**: WAITING - depends on darkfid
- **localnet**: Not tested (testnet is priority)
- **Upstream**: ~289 commits since testnet went offline (2026-01-23)

## Port Standardization (upstream commit ec44922bc, 2026-01-23)

Upstream standardized all ports. Our docs and configs have been updated:

| Service | Old Port | New Port |
|---------|----------|----------|
| darkfid RPC | 8340 | **18345** |
| Management RPC | (none) | **18346** |
| Stratum RPC | 18347 | 18347 (unchanged) |
| P2P (testnet) | 26660 | **28340** |

The new `management_rpc` section appears in default configs generated by recent darkfid builds.

## RESOLVED: Testnet Status

**Asked in #dev as zk99:**
> hey, trying to run a testnet node on a05956d but getting genesis errors. is testnet working right now or should i wait for the reset?

**Response from upgrayedd:**
> zk99: wait for the reset

**Confirmed by ryu:**
> ++

**Conclusion:** Testnet is intentionally offline. Wait for network reset.

## Timeline
- No specific timeline provided
- Active development ongoing (commits to master daily)
- Reset is planned but no ETA
- ~289 new commits since testnet went offline

## Action Items
1. [x] Asked about testnet status in #dev
2. [ ] Monitor #dev for reset announcement
3. [ ] Re-test darkfid after reset announced
4. [ ] Test mining after node syncs
5. [x] Update port references to match upstream (ec44922bc)
6. [x] Add version tracking (versions.json + update-versions.sh)
7. [ ] Rebuild darkfi on latest master when testnet resets
8. [ ] Verify new management_rpc config section works correctly

## Technical Notes (for after reset)
- Use commit recommended by devs (currently a05956d, may change at reset)
- Config: tcp+tls transport preferred over tor (faster)
- Seeds: lilith0/lilith1.dark.fi on port **28340** (was 18340)
- darkirc seeds work on port 25551
- New darkfid RPC on port **18345** (was 8340)
- New management RPC on port **18346** (new service)
- Stratum RPC still on port **18347**

## Applied from #dev Chat

- tor+tls is outgoing only - no need for tor+tls listener (Tor already encrypted) - from grug
- Recent commits: explorer search pages, DAO rename/removal functionality

## Observations

- TCP seeds (lilith0/lilith1.dark.fi:28340) refusing connections for darkfid (expected while testnet offline)
- darkirc TCP seeds (port 25551) also refused but found peers via other nodes
- Tor .onion seeds timing out for darkfid

## Next Steps

1. Rebuild darkfid on latest master (use `./scripts/02-build-darkfi.sh`)
2. Run `./scripts/check-status.sh` to verify build and connectivity
3. Test node sync when testnet resets
4. Test mining once synced

## Notes from Conversations

### Contract Deployment Bug (ryu)
- Deterministic script reproduces error
- Deploying 10 different contracts with same wasm causes error
- Related to membership contract with merkle/smt

---
*Last updated: 2026-02-28*
